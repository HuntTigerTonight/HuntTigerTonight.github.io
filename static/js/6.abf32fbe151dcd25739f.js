webpackJsonp([6],{"er4/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),l=a("Rly4"),r=a("NYxO"),s=a("PJh5"),o=a.n(s),c={data:function(){return{reportList:{},initialTime:null,lastTime:null,pageSize:20,currentPage:1,patientName:null,inHospitalType:null,hospitalId:null,id:null,checkState:"1",height:document.documentElement.clientHeight-247}},computed:n()({},Object(r.c)(["hospitalObj","userName","hospitalList","hospitalIdBelongsAccount"]),{getStartTime:function(){return this.initialTime?o()(this.initialTime).format("YYYY-MM-DD HH:mm"):null},getEndTime:function(){return this.lastTime?o()(this.lastTime).add(1,"days").format("YYYY-MM-DD HH:mm"):null}}),methods:n()({},Object(r.b)({confirmIsPermission:"confirmIsPermission"}),{getLists:function(){var e=this;Object(l.a)("get","dcPatient/dcPatients",{limit:this.pageSize,page:this.currentPage,filters:[{value:this.patientName,property:"name",operation:"ALIKE"},{value:this.getStartTime,property:"to_hospital_time",operation:"GE",format:"%Y-%m-%d"},{value:this.getEndTime,property:"to_hospital_time",operation:"LE",format:"%Y-%m-%d"},{value:this.inHospitalType,property:"in_hospital_type",operation:"EQ"},{value:this.hospitalId,property:"report_hospital",operation:"EQ"}]}).then(function(t){e.reportList=t,t.data&&e.reportList.data.map(function(e,t){e.toHospitalTime&&(e.toHospitalTime=o()(e.toHospitalTime).format("YYYY-MM-DD HH:mm"))})})},sizeChange:function(e){this.pageSize=e,this.getLists()},currentChange:function(e){if(this.currentPage==e)return!1;this.currentPage=e,this.getLists()},conditionalQuery:function(){this.getLists()},add:function(){this.$router.push({name:"HospitalReported",query:{type:"add"}})},view:function(e){this.$router.push({name:"HospitalReported",query:{type:"view",id:e.row.id}})},edit:function(e){this.$router.push({name:"HospitalReported",query:{type:"edit",id:e.row.id}})},check:function(e){this.$router.push({name:"HospitalReported",query:{type:"check",id:e.row.id}})},delete:function(e){var t=this;Object(l.a)("DELETE","dcPatient/"+e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getLists()})},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delete(e.row.id)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},state:function(e){switch(e.row.checkState){case"0":return"编辑中";case"1":return"审核通过";case"2":return"审核不通过";case"3":return"填写完整"}},reportHospital:function(e){return this.hospitalObj[e.reportHospital]}}),created:function(){this.getLists()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"reportList"}},[a("div",{staticClass:"search_box searchForm other"},[a("form",[a("table",[a("tr",[a("td",[a("label",[e._v("姓名：")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入姓名",size:"small","suffix-icon":"el-icon-edit-outline",clearable:""},model:{value:e.patientName,callback:function(t){e.patientName=t},expression:"patientName"}})],1),e._v(" "),a("td",{staticClass:"inhospitaltype"},[a("label",[e._v("入院类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择入院类型",id:"in_hospital_type",clearable:"",filterable:""},model:{value:e.inHospitalType,callback:function(t){e.inHospitalType=t},expression:"inHospitalType"}},[a("el-option",{attrs:{value:"120救护车"}},[e._v("120救护车")]),e._v(" "),a("el-option",{attrs:{value:"外院转入"}},[e._v("外院转入")]),e._v(" "),a("el-option",{attrs:{value:"自行入院"}},[e._v("自行入院")]),e._v(" "),a("el-option",{attrs:{value:"院内转入"}},[e._v("院内转入")])],1)],1),e._v(" "),"cpcms"==e.userName||"666666"==e.hospitalIdBelongsAccount?a("td",[a("label",[e._v("上报医院：")]),e._v(" "),a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择所属医院",size:"small",name:"hospitalName",clearable:"",filterable:""},model:{value:e.hospitalId,callback:function(t){e.hospitalId=t},expression:"hospitalId"}},e._l(e.hospitalList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),a("td",{staticClass:"inhospitaltime"},[a("label",[e._v("入院日期：")]),e._v(" "),a("el-date-picker",{attrs:{placeholder:"开始日期",type:"date",size:"small","value-format":"yyyy-MM-dd"},model:{value:e.initialTime,callback:function(t){e.initialTime=t},expression:"initialTime"}}),e._v("\n            至\n            "),a("el-date-picker",{attrs:{placeholder:"结束日期",type:"date",size:"small","value-format":"yyyy-MM-dd"},model:{value:e.lastTime,callback:function(t){e.lastTime=t},expression:"lastTime"}})],1),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return t.preventDefault(),e.conditionalQuery(t)}}},[a("span",{staticClass:"el-icon-search"}),e._v(" "),a("span",[e._v("查询")])]),e._v(" "),e.common.permissions("POST@/dcPatient")?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[a("span",{staticClass:"el-icon-plus"}),e._v(" "),a("span",[e._v("新增")])]):e._e()],1)])])])]),e._v(" "),a("div",{staticStyle:{margin:"0 auto"}},[a("div",{staticClass:"table_data"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:!0,data:e.reportList.data,border:"","max-height":e.height}},[a("el-table-column",{attrs:{fixed:"",prop:"name",label:"姓名","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idcard",label:"身份证号码","min-width":"180","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"80","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄","min-width":"80","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hospitalContent.chubuzhenduan",label:"诊断","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"toHospitalTime",sortable:"",label:"入院时间","min-width":"150","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inHospitalType",label:"入院类型","min-width":"150","header-align":"center",align:"center"}}),e._v(" "),"cpcms"==e.userName||"666666"==e.hospitalIdBelongsAccount?a("el-table-column",{attrs:{formatter:e.reportHospital,label:"上报医院","min-width":"150","header-align":"center",align:"center"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"reporter",label:"填报人","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"0"==t.row.checkState?"primary":"1"==t.row.checkState?"success":"2"==t.row.checkState?"danger":"warning","close-transition":""}},[e._v(e._s(e.state(t)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"province",label:"操作",width:"220","header-align":"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.checkState||t.row.reporter!=e.userName?a("el-button",{attrs:{type:"success",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.view(t)}}},[e._v("\n              查看\n            ")]):e._e(),e._v(" "),e.common.permissions("PUT@/dcPatient")&&1!=t.row.checkState&&t.row.reporter==e.userName?a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.edit(t)}}},[e._v("\n              编辑\n            ")]):e._e(),e._v(" "),e.common.permissions("/dcPatient/check")&&0!=t.row.checkState&&1!=t.row.checkState?a("el-button",{attrs:{type:"warning",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.check(t)}}},[e._v("\n              审核\n            ")]):e._e(),e._v(" "),e.common.permissions("DELETE@/dcPatient/[0-9a-zA-Z]{32,32}")&&1!=t.row.checkState?a("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.deleteRow(t)}}},[e._v("\n              删除\n            ")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center",border:"1px solid #e4e4e4",background:"#eef1f6"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50,100,200],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.reportList.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)])])},staticRenderFns:[]};var u=a("VU/8")(c,p,!1,function(e){a("jk2N")},"data-v-f56ccf6e",null);t.default=u.exports},jk2N:function(e,t){}});