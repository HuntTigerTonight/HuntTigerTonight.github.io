webpackJsonp([10],{"9op0":function(e,t){},vjlY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),l=a("Dd8w"),s=a.n(l),o=a("Rly4"),r=a("NYxO"),c={data:function(){return{name:"",hospital:{},pageSize:20,currentPage:1,dialogAdd:!1,dialogEdit:!1,roles:{},height:document.documentElement.clientHeight-247,formLabelWidth:"120px",Info:{name:"",account:{username:""},isComplete:0,state:"enabled"},isShow:"",rules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],"account[username]":[{required:!0,message:"请输入机构账号",trigger:"blur"},{min:1,max:40,message:"长度最大40个字符",trigger:"blur"}]}}},computed:s()({},Object(r.c)(["hospitalIdBelongsAccount","isSuperAdmin"])),methods:s()({},Object(r.b)({getHospitalList:"getHospitalList",confirmIsPermission:"confirmIsPermission"}),{getLists:function(){var e=this;Object(o.a)("get","hospital/hospitals",{limit:this.pageSize,page:this.currentPage,filters:[{property:"name",value:this.name,operation:"ALIKE"}]}).then(function(t){e.hospital=t})},sizeChange:function(e){this.pageSize=e,this.getLists()},currentChange:function(e){if(this.currentPage==e)return!1;this.currentPage=e,this.getLists()},conditionalQuery:function(){this.getLists()},add:function(){n()(this.$data.Info,this.$options.data().Info),this.dialogAdd=!0},addSave:function(){var e=this;this.$refs.ruleFormAdd.validate(function(t){if(!t)return!1;Object(o.a)("post","hospital",e.Info).then(function(t){e.dialogAdd=!1,e.$message({showClose:!0,message:"新增成功",type:"success",duration:"1000"}),e.getLists(),e.getHospitalList()})})},edit:function(e){this.$router.push({name:"HospitalDetail",query:{id:e.row.id}})},delete:function(e){var t=this;Object(o.a)("DELETE","hospital/"+e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getLists()})},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delete(e.row.id)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}),created:function(){this.getLists()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isSuperAdmin||"666666"==e.hospitalIdBelongsAccount?a("div",{staticClass:"search_box",attrs:{id:"searchbox"}},[a("table",[a("tr",[a("td",[a("label",[e._v("机构名称：")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入机构名称",size:"small","suffix-icon":"el-icon-edit-outline"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return t.preventDefault(),e.conditionalQuery(t)}}},[a("span",{staticClass:"el-icon-search"}),e._v(" "),a("span",[e._v("查询")])]),e._v(" "),e.common.permissions("POST@/hospital")?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[a("span",{staticClass:"el-icon-plus"}),e._v(" "),a("span",[e._v("新增")])]):e._e()],1)])])]):e._e(),e._v(" "),a("div",{staticStyle:{margin:"0 auto"}},[a("div",{staticClass:"table_data"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:!0,data:e.hospital.data,border:"","max-height":e.height}},[a("el-table-column",{attrs:{type:"index",label:"序号","header-align":"center",align:"center",width:"65"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"机构名称","header-align":"center",align:"center","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"socialCreditCode",label:"社会信用代码","header-align":"center",align:"center","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jgCode",label:"组织机构代码","header-align":"center",align:"center","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"主院地址","header-align":"center",align:"center","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"级别","header-align":"center",align:"center","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"等次","header-align":"center",align:"center","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.common.permissions("/hospital/[0-9]{0,9}")?a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.edit(t)}}},[e._v("编辑")]):e._e(),e._v(" "),e.common.permissions("DELETE@/hospital/[0-9]{0,9}")?a("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.deleteRow(t)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center",border:"1px solid #e4e4e4",background:"#eef1f6"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50,100,200],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.hospital.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新增机构",visible:e.dialogAdd,width:"600px"},on:{"update:visible":function(t){e.dialogAdd=t}}},[a("el-form",{ref:"ruleFormAdd",attrs:{model:e.Info,rules:e.rules}},[a("el-form-item",{attrs:{label:"机构名称","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入机构名称",size:"small","suffix-icon":"el-icon-edit-outline","auto-complete":"off"},model:{value:e.Info.name,callback:function(t){e.$set(e.Info,"name",t)},expression:"Info.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构账号","label-width":e.formLabelWidth,prop:"account[username]"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入机构账号",size:"small","suffix-icon":"el-icon-edit-outline","auto-complete":"off"},model:{value:e.Info.account.username,callback:function(t){e.$set(e.Info.account,"username",t)},expression:"Info.account.username"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){t.preventDefault(),e.dialogAdd=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.addSave(t)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("9op0")},"data-v-7b4c720c",null);t.default=d.exports}});